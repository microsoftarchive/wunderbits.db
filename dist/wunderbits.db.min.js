!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),(t.wunderbits||(t.wunderbits={})).db=e()}}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){"use strict";var r=e("./WBEventEmitter").extend({mixins:[e("./mixins/WBDestroyableMixin"),e("./mixins/WBUtilsMixin"),e("./mixins/ObservableHashMixin")]});t.exports=r},{"./WBEventEmitter":5,"./mixins/ObservableHashMixin":31,"./mixins/WBDestroyableMixin":33,"./mixins/WBUtilsMixin":36}],2:[function(e,t){"use strict";var r=e("./WBSingleton").extend({mixins:[e("./mixins/WBEventsMixin"),e("./mixins/WBBindableMixin"),e("./mixins/WBDestroyableMixin"),e("./mixins/WBUtilsMixin"),e("./mixins/ObservableHashMixin")]});t.exports=r},{"./WBSingleton":8,"./mixins/ObservableHashMixin":31,"./mixins/WBBindableMixin":32,"./mixins/WBDestroyableMixin":33,"./mixins/WBEventsMixin":34,"./mixins/WBUtilsMixin":36}],3:[function(e,t){"use strict";function r(e,t){var n=this;e=e||{};var o=e.mixins||[];delete e.mixins;for(var a,s=i(n,e,t);o.length;)a=o.shift(),"function"==typeof a.applyToClass&&a.applyToClass(s);return s.extend=n.extend||r,s}function n(e){var t=this;t.uid=t.uid||s(),t.options=e||t.options,t.augmentProperties(),t.initialize.apply(t,arguments),t.initMixins.apply(t,arguments)}var i=e("./lib/inherits"),o=e("./lib/extend"),a=e("./lib/clone"),s=e("./lib/createUID"),c=e("./lib/fromSuper"),u={initialize:function(){var e=this;return e},initMixins:function(){for(var e,t=this,r=c.concat(t,"initializers");r.length;)e=r.shift(),"function"==typeof e&&e.apply(t,arguments)},augmentProperties:function(){function e(e,r){var n=typeof r;t[e]="function"===n?r.call(t):"object"===n?a(r,!0):r}var t=this,r=c.merge(t,"properties");for(var n in r)e(n,r[n])}};o(n.prototype,u),n.extend=r,t.exports=n},{"./lib/clone":12,"./lib/createUID":13,"./lib/extend":18,"./lib/fromSuper":20,"./lib/inherits":23}],4:[function(e,t){"use strict";function r(e,t,r){return function(){var n=this;if(!(n instanceof l))throw new Error(r+" invoked with wrong context");if(n._state!==s.pending)return n;n._args=a(arguments);var i=t?n._args.shift():void 0;return n._state=e,n.trigger(i),n}}var n=e("./WBClass"),i=e("./WBPromise"),o=e("./lib/assert"),a=e("./lib/toArray"),s={pending:0,resolved:2,rejected:4},c={0:["pending"],2:["resolved","resolve"],4:["rejected","reject"]},u={constructor:function(e){var t=this;t._context=e,t._state=s.pending,t._args=[],t.handlers=[]},state:function(){var e=this;return c[e._state][0]},trigger:function(e){var t=this;if(t._state!==s.pending)for(var r,n=t.handlers;n.length;)r=n.shift(),t.invoke(r,e||t._context)},invoke:function(e,t){var r=this,n=r._state,i=e.context||t||r,o=e.args;r._args.forEach(function(e){o.push(e)});var a=e.type,c="then"===a||"done"===a&&n===s.resolved||"fail"===a&&n===s.rejected;c&&e.fn.apply(i,o)},promise:function(){var e=this;return e._promise=e._promise||new i(this),e._promise}};["then","done","fail"].forEach(function(e){u[e]=function(){var t=this,r=a(arguments),n=r.shift(),i=r.shift();return o.function(n,e+" accepts only functions"),t.handlers.push({type:e,context:i,fn:n,args:r}),t.trigger(),t}}),u.always=u.then,[s.resolved,s.rejected].forEach(function(e){var t=c[e][1];u[t]=r(e,!1,t),u[t+"With"]=r(e,!0,t)});var l=n.extend(u);t.exports=l},{"./WBClass":3,"./WBPromise":7,"./lib/assert":11,"./lib/toArray":27}],5:[function(e,t){"use strict";var r=e("./WBClass").extend({mixins:[e("./mixins/WBBindableMixin"),e("./mixins/WBEventsMixin")]});t.exports=r},{"./WBClass":3,"./mixins/WBBindableMixin":32,"./mixins/WBEventsMixin":34}],6:[function(e,t){"use strict";var r=e("./lib/extend"),n=e("./lib/clone"),i=e("./lib/assert"),o=e("./WBSingleton"),a=o.extend({applyTo:function(e){var t,i=n(this.Behavior,!0);"function"==typeof i.initialize&&(t=i.initialize,delete i.initialize);var o=i.properties;return delete i.properties,r(e,i),t&&t.apply(e),o&&r(e,o),e},applyToClass:function(e){i.class(e,"applyToClass expects a class");var t=e.prototype,o=n(this.Behavior,!0),a=o.initialize;"function"==typeof a&&(!t.hasOwnProperty("initializers")&&(t.initializers=[]),t.initializers.push(a),delete o.initialize);var s=o.properties;return delete o.properties,r(t,o),!t.hasOwnProperty("properties")&&(t.properties={}),s&&r(t.properties,s),e}});a.extend=function(e,t){e||(e={}),t||(t={});var i=n(this.Behavior,!0);t.Behavior=r(i,e);var s=o.extend.call(this,t);return s.extend=a.extend,s},t.exports=a},{"./WBSingleton":8,"./lib/assert":11,"./lib/clone":12,"./lib/extend":18}],7:[function(e,t){"use strict";function r(e){return function(){var t=this.deferred;return t[e].apply(t,arguments),this}}var n=e("./WBClass"),i={constructor:function(e){this.deferred=e},promise:function(){return this},state:function(){return this.deferred.state()}};["done","fail","then"].forEach(function(e){i[e]=r(e)}),i.always=i.then,t.exports=n.extend(i)},{"./WBClass":3}],8:[function(e,t){"use strict";function r(e,t){for(var r;e.length;)r=e.shift(),"function"==typeof r.applyTo&&r.applyTo(t)}function n(e){e=e||{};var t=this||s;a.prototype=t;var c=new a,u=e.mixins||[];return e.mixins=void 0,r(u,c),i(c,e),c.extend=n,c.uid=o(),c}var i=e("./lib/extend"),o=e("./lib/createUID"),a=function(){};a.prototype={extend:n};var s=new a;t.exports=s},{"./lib/createUID":13,"./lib/extend":18}],9:[function(e,t){"use strict";var r=e("./WBClass"),n=e("./mixins/WBDestroyableMixin"),i=n.Behavior.destroy,o=r.extend({mixins:[e("./mixins/WBEventsMixin"),e("./mixins/WBStateMixin"),e("./mixins/WBBindableMixin"),n],initialize:function(e){var t=this;e&&(t.attributes=e)},sync:function(e,t,r){r&&"function"==typeof r.success&&r.success()},fetch:function(e){var t=this,r=e.success,n=this;return e.success=function(t){return n.set(t,e)?(r&&r(n,t,e),void n.trigger("sync",n,t,e)):!1},t.sync("read",t,e)},save:function(e,t,r){var n=this;return n.destroying||(n.set(e,t,r),"object"==typeof e&&(r=t),n.sync("update",n,r)),n},destroy:function(e){var t=this;t.destroying||(t.destroying=!0,i.call(t,e),t.attributes={},t.sync("delete",t,e))}});t.exports=o},{"./WBClass":3,"./mixins/WBBindableMixin":32,"./mixins/WBDestroyableMixin":33,"./mixins/WBEventsMixin":34,"./mixins/WBStateMixin":35}],10:[function(e,t){"use strict";t.exports={lib:e("./lib"),BaseEventEmitter:e("./BaseEventEmitter"),BaseSingleton:e("./BaseSingleton"),WBClass:e("./WBClass"),WBDeferred:e("./WBDeferred"),WBEventEmitter:e("./WBEventEmitter"),WBMixin:e("./WBMixin"),WBSingleton:e("./WBSingleton"),WBStateModel:e("./WBStateModel"),mixins:e("./mixins")}},{"./BaseEventEmitter":1,"./BaseSingleton":2,"./WBClass":3,"./WBDeferred":4,"./WBEventEmitter":5,"./WBMixin":6,"./WBSingleton":8,"./WBStateModel":9,"./lib":22,"./mixins":37}],11:[function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"")}function n(e){r[e]=function(t,n){r(typeof t===e,n)}}var i=Array.isArray;r.empty=function(e,t){var n=i(e)?e:Object.keys(e);r(0===n.length,t)},r.array=function(e,t){r(i(e),t)},r.class=function(e,t){var n=e.prototype;r(n&&n.constructor===e,t)};for(var o=["undefined","boolean","number","string","function","object"];o.length;)n(o.shift());t.exports=r},{}],12:[function(e,t){"use strict";function r(e,t){if(e=e.slice(),t){for(var r,n=[];e.length;)r=e.shift(),r=r instanceof Object?o(r,t):r,n.push(r);e=n}return e}function n(e){return new Date(e)}function i(e,t){var r={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];r[i]=a instanceof Date?n(a):"object"==typeof a&&null!==a&&t?o(a,t):a}return r}function o(e,t){return a(e)?r(e,t):i(e,t)}var a=Array.isArray;t.exports=o},{}],13:[function(e,t){"use strict";function r(e){var t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)}function n(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r);return String(e?e:"")+t}t.exports=n},{}],14:[function(e,t){"use strict";function r(e,t,r){var n;return function(){var i=this,o=arguments,a=function(){n=null,r||e.apply(i,o)},s=r&&!n;clearTimeout(n),n=setTimeout(a,t),s&&e.apply(i,o)}}t.exports=r},{}],15:[function(e,t){"use strict";function r(e){var t=n(arguments);return t[0]=1,t.unshift(e),i.apply(null,t)}var n=e("./toArray"),i=e("./delay");t.exports=r},{"./delay":16,"./toArray":27}],16:[function(e,t){"use strict";function r(e,t,r){var i=n(arguments,3);return setTimeout(function(){var t=r&&r.destroyed;!t&&e.apply(r,i)},t)}var n=e("./toArray");t.exports=r},{"./toArray":27}],17:[function(e,t){"use strict";var r=e("./assert"),n=e("./toArray"),i=e("./clone"),o=/\s+/,a={trigger:"Cannot trigger event(s) without event name(s)",events:"Cannot bind/unbind without valid event name(s)",callback:"Cannot bind/unbind to an event without valid callback function"},s={properties:{_events:{},_cache:{}},on:function(e,t,n){var i=this;return r.string(e,a.events),r.function(t,a.callback),i.iterate(e,function(e){i.bind(e,t,n);var r=i._cache;r[e]&&t.apply(n||i,r[e])}),i},off:function(e,t,n){var i=this;return e&&r.string(e,a.events),e||t||n?(e=e||Object.keys(i._events),i.iterate(e,function(e){i.unbind(e,t,n)}),i):(i._events={},i)},once:function(e,t,r){var i=this,o=n(arguments);return o[1]=function(){i.off.apply(i,o),t.apply(r||i,arguments)},i.on.apply(i,o),i},publish:function(e){var t=this,i=n(arguments);return r.string(e,a.events),t.iterate(e,function(e){var r=t._cache;r[e]||(r[e]=i.slice(1),i[0]=e,t.trigger.apply(t,i))}),t},unpublish:function(e){var t=this;return r.string(e,a.events),t.iterate(e,function(e){t._cache[e]=void 0}),t},unpublishAll:function(){var e=this;return e._cache={},e},trigger:function(e){var t=this;r.string(e,a.trigger);var i=n(arguments,1);return t.iterate(e,function(e){t.triggerEvent(e,i)}),t},triggerEvent:function(e,t){for(var r=this,n=r._events||{},i=[],o=e.split(":");o.length;)i.push(o.shift()),e=i.join(":"),e in n&&r.triggerSection(e,o,t)},triggerSection:function(e,t,r){var n=this,o=n._events||{},a=o[e]||[];a.forEach(function(e){var o;t.length&&(o=i(r),o.unshift(t)),e.callback.apply(e.context||n,o||r)})},iterate:function(e,t){var n=this;for("string"==typeof e?e=e.split(o):r.array(e);e.length;)t.call(n,e.shift())},bind:function(e,t,r){var n=this,i=n._events||{},o=i[e]||(i[e]=[]);return o.push({callback:t,context:r}),n},unbind:function(e,t,r){for(var n,i=this,o=i._events,a=o[e]||[],s=[],c=-1,u=a.length;++c<u;)n=a[c],(t&&t!==n.callback||r&&r!==n.context)&&s.push(n);return o[e]=s,i}};t.exports=s},{"./assert":11,"./clone":12,"./toArray":27}],18:[function(e,t){"use strict";function r(){var e=n(arguments);o(e.length>0,"extend expect one or more objects");for(var t=e.shift();e.length;)i(t,e.shift());return t}var n=e("./toArray"),i=e("./merge"),o=e("./assert");t.exports=r},{"./assert":11,"./merge":25,"./toArray":27}],19:[function(e,t){"use strict";function r(e,t,r){for(var n=0,i=e.length;i>n;n++)if(t.call(r,e[n],n,e)===!1)return}function n(e,t,r){for(var n in e)if(e.hasOwnProperty(n)&&t.call(r,e[n],n)===!1)return}function i(e,t,i){var o=Array.isArray(e)?r:n;o(e,t,i)}t.exports=i},{}],20:[function(e,t){"use strict";function r(e,t){var n=e.constructor,a=n.prototype,s={};e.hasOwnProperty(t)?s=e[t]:a.hasOwnProperty(t)&&(s=a[t]);var c=n&&n.__super__;return c&&(s=i(r(c,t),s)),o({},s)}function n(e,t){var r=e.constructor,i=r.prototype,o=[];e.hasOwnProperty(t)?o=e[t]:i.hasOwnProperty(t)&&(o=i[t]);var a=r&&r.__super__;return a&&(o=[].concat(n(a,t),o)),[].concat(o)}var i=e("./merge"),o=e("./extend");t.exports={merge:r,concat:n}},{"./extend":18,"./merge":25}],21:[function(e,t){"use strict";function r(e){var t=[];for(var r in e)"function"==typeof e[r]&&t.push(r);return t}t.exports=r},{}],22:[function(e,t){"use strict";t.exports={assert:e("./assert"),clone:e("./clone"),createUID:e("./createUID"),debounce:e("./debounce"),defer:e("./defer"),delay:e("./delay"),events:e("./events"),extend:e("./extend"),forEach:e("./forEach"),fromSuper:e("./fromSuper"),functions:e("./functions"),inherits:e("./inherits"),isEqual:e("./isEqual"),merge:e("./merge"),size:e("./size"),toArray:e("./toArray"),when:e("./when"),where:e("./where")}},{"./assert":11,"./clone":12,"./createUID":13,"./debounce":14,"./defer":15,"./delay":16,"./events":17,"./extend":18,"./forEach":19,"./fromSuper":20,"./functions":21,"./inherits":23,"./isEqual":24,"./merge":25,"./size":26,"./toArray":27,"./when":28,"./where":29}],23:[function(e,t){"use strict";function r(e,t,r){var i;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n(i,e),i.prototype=Object.create(e.prototype),n(i.prototype,t),i.prototype.constructor=i,n(i,r),i.__super__=e.prototype,i}var n=e("./extend");t.exports=r},{"./extend":18}],24:[function(e,t){"use strict";function r(e,t){return e===t}t.exports=r},{}],25:[function(e,t){"use strict";function r(e,t){for(var r=n(arguments,1);r.length;){t=r.shift();for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}return e}var n=e("./toArray");t.exports=r},{"./toArray":27}],26:[function(e,t){"use strict";function r(e){return!Array.isArray(e)&&(e=Object.keys(e)),e.length}t.exports=r},{}],27:[function(e,t){"use strict";function r(e,t){return n.call(e,t||0)}var n=Array.prototype.slice;t.exports=r},{}],28:[function(e,t){"use strict";function r(){function e(){o.rejectWith(this)}function t(){if("rejected"!==o.state()){var e=s-a.length-1;if(c[e]=i(arguments),a.length){var r=a.shift();r.done(t)}else c.unshift(this),o.resolveWith.apply(o,c)}}var r=this,o=new n(r),a=i(arguments);1===a.length&&Array.isArray(a[0])&&(a=a[0]);var s=a.length,c=new Array(s);if(a.length){a.forEach(function(t){t.fail(e)});var u=a.shift();u.done(t)}else o.resolve();return o.promise()}var n=e("../WBDeferred"),i=e("./toArray");t.exports=r},{"../WBDeferred":4,"./toArray":27}],29:[function(e,t){"use strict";function r(e,t){var r=[];return n(e,function(e){for(var n in t){if(e[n]!==t[n])return;r.push(e)}}),r}var n=e("./forEach");t.exports=r},{"./forEach":19}],30:[function(e,t){"use strict";var r=e("../WBMixin"),n=e("../lib/fromSuper"),i=r.extend({initialize:function(){var e=this;e.controllers=[],e.implemented=[],e.implements=n.concat(e,"implements"),e.createControllerInstances(),e.bindTo(e,"destroy","destroyControllers")},createControllerInstances:function(){var e,t,r,n=this,i=n.implements;for(r=i.length;r--;)e=i[r],n.implemented.indexOf(e.toString())<0&&(t=new e(n),n.controllers.push(t),t.parent=n,n.trackImplementedSuperConstructors(t));return n.implemented},trackImplementedSuperConstructors:function(e){var t=this,r=e.__super__,n=r&&r.constructor;n&&(t.implemented.push(n.toString()),t.trackImplementedSuperConstructors(n))},destroyControllers:function(){for(var e,t=this,r=t.controllers,n=r.length;n--;)e=r[n],e.destroyed||e.destroy();delete t.controllers}});t.exports=i},{"../WBMixin":6,"../lib/fromSuper":20}],31:[function(e,t){"use strict";var r=e("../WBMixin"),n=e("../lib/fromSuper"),i=e("../lib/clone"),o=r.extend({initialize:function(){var e=this,t=n.merge(e,"observes");for(var r in t)e.bindToTarget(e.resolveTarget(r),t[r])},bindToTarget:function(e,t){var r=this;for(var n in t)r.bindHandlers(e,n,t[n])},bindHandlers:function(e,t,r){var n=this;for(r="string"==typeof r?[r]:i(r);r.length;)n.bindTo(e,t,r.shift())},resolveTarget:function(e){var t=this;if("self"===e)return t;var r=t[e];if(!r&&"string"==typeof e&&e.indexOf(".")>-1)for(e=e.split("."),r=t;e.length&&r;)r=r[e.shift()];return r}});t.exports=o},{"../WBMixin":6,"../lib/clone":12,"../lib/fromSuper":20}],32:[function(e,t){"use strict";var r=e("../WBMixin"),n=e("../lib/createUID"),i=r.extend({properties:{_bindings:{},_namedEvents:{}},callbackFactory:function(e,t){var r,n=function(){t[e].apply(t,arguments)},i=function(){e.apply(t,arguments)};return"string"==typeof e?(r=n,i=null):(r=i,n=null),r},bindTo:function(e,t,r,i){var o=this;o.checkBindingArgs.apply(o,arguments),i=i||o;var a=o.isAlreadyBound(e,t,r,i);if(a)return a;var s,c;e.constructor&&e.constructor.fn&&e.constructor.fn.on===e.on?(s=o.callbackFactory(r,i),c=[t,s]):(s="string"==typeof r?i[r]:r,c=[t,s,i]),e.on.apply(e,c);var u={uid:n(),target:e,event:t,originalCallback:r,callback:s,context:i};return o._bindings[u.uid]=u,o.addToNamedBindings(t,u),u},bindOnceTo:function(e,t,r,i){var o=this;o.checkBindingArgs.apply(o,arguments),i=i||o;var a=o.isAlreadyBound(e,t,r,i);if(a)return a;var s=function(){("string"==typeof r?i[r]:r).apply(i,arguments),o.unbindFrom(c)},c={uid:n(),target:e,event:t,originalCallback:r,callback:s,context:i};return e.on(t,s,i),o._bindings[c.uid]=c,o.addToNamedBindings(t,c),c},unbindFrom:function(e){var t=this,r=e&&e.uid;if(!e||"string"!=typeof r)throw new Error("Cannot unbind from undefined or invalid binding");var n=e.event,i=e.context,o=e.callback,a=e.target;if(n&&o&&a&&i){a.off(n,o,i);for(var s in e)"uid"!==s&&delete e[s];delete t._bindings[r];var c=t._namedEvents,u=c[n];if(u){for(var l=u&&u.slice(0),f=u.length-1;f>=0;f--)u[f].uid===r&&l.splice(f,1);c[n]=l}}},unbindFromTarget:function(e){var t=this;if(!e||"function"!=typeof e.on)throw new Error("Cannot unbind from undefined or invalid binding target");var r;for(var n in t._bindings)r=t._bindings[n],r.target===e&&t.unbindFrom(r)},unbindAll:function(){var e,t=this;for(var r in t._bindings)e=t._bindings[r],t.unbindFrom(e)},checkBindingArgs:function(e,t,r,n){if(n=n||this,!e||"function"!=typeof e.on)throw new Error("Cannot bind to undefined target or target without #on method");if(!t||"string"!=typeof t)throw new Error("Cannot bind to target event without event name");if(!r||"function"!=typeof r&&"string"!=typeof r)throw new Error("Cannot bind to target event without a function or method name as callback");if("string"==typeof r&&!n[r])throw new Error("Cannot bind to target using a method name that does not exist for the context")},isAlreadyBound:function(e,t,r,n){var i=this,o=i._namedEvents[t];if(o)for(var a=0,s=o.length;s>a;a++){var c=o[a]||{},u=c.target;if(!u)return!1;var l=e.uid?e.uid===u.uid:!1;if(c.originalCallback===r&&c.context===n&&l)return c}return!1},addToNamedBindings:function(e,t){var r=this;r._namedEvents[e]||(r._namedEvents[e]=[]),r._namedEvents[e].push(t)}});t.exports=i},{"../WBMixin":6,"../lib/createUID":13}],33:[function(e,t){"use strict";function r(){}function n(e){var t=this;"string"==typeof e&&(e=t[e]),"function"==typeof e&&e.call(t)}var i=e("../lib/forEach"),o=e("../WBMixin"),a=["unbind","unbindAll","onDestroy"],s=o.extend({destroy:function(){var e=this;i(a,n,e),e.trigger("destroy"),e.destroyObject(e),e.destroyed=!0},destroyObject:function(e){var t=this;for(var r in e)t.destroyKey(r,e)},destroyKey:function(e,t){t.hasOwnProperty(e)&&"uid"!==e&&"cid"!==e&&(t[e]="function"==typeof t[e]?r:void 0)}});t.exports=s},{"../WBMixin":6,"../lib/forEach":19}],34:[function(e,t){"use strict";var r=e("../WBMixin"),n=e("../lib/events"),i=r.extend(n);t.exports=i},{"../WBMixin":6,"../lib/events":17}],35:[function(e,t){"use strict";var r=e("../lib/clone"),n=e("../lib/merge"),i=e("../lib/extend"),o=e("../lib/isEqual"),a=e("../WBMixin"),s=a.extend({attributes:{},options:{},initialize:function(e,t){var r=this;r.attributes=i({},r.defaults,e),r.options=t||{},r.changed={}},get:function(e){return console.warn("getters are deprecated"),this.attributes[e]},set:function(e,t,r){var i=this;if(null===e)return i;var o,a;if("object"==typeof e?(o=e,r=t):(o={},o[e]=t),r||(r={}),r.silent)n(i.attributes,a);else{var s=i.changes(o,r);i._trigger(o,s,r)}return i},unset:function(e,t){return this.set(e,void 0,i({},t,{unset:!0}))},clear:function(e){var t=this;return t.set(t.defaults,e)},changes:function(e,t){var n,i,a=this,s=[],c=r(a.attributes,!0),u=a.attributes;a.changed={};for(n in e)i=e[n],o(u[n],i)||s.push(n),o(c[n],i)?delete a.changed[n]:a.changed[n]=i,u[n]=t.unset?void 0:i;return s},_trigger:function(e,t,r){for(var n,i=this,o=i.attributes;t&&t.length&&i.trigger;)n=t.shift(),i.trigger("change:"+n,i,o[n],r)}});t.exports=s},{"../WBMixin":6,"../lib/clone":12,"../lib/extend":18,"../lib/isEqual":24,"../lib/merge":25}],36:[function(e,t){"use strict";var r=e("../WBMixin"),n=e("../WBDeferred"),i=e("../lib/when"),o=e("../lib/toArray"),a=e("../lib/forEach"),s=e("../lib/delay"),c=e("../lib/defer"),u=e("../lib/functions"),l=r.extend({deferred:function(){var e=this;return new n(e)},when:function(){var e=this;return i.apply(e,arguments)},defer:function(e){var t=this,r=o(arguments);return r[1]=r[1]||this,"string"==typeof e&&(r[0]=t[e]),c.apply(null,r)},delay:function(e){var t=this,r=o(arguments);return r[2]=r[2]||t,"string"==typeof e&&(r[0]=t[e]),s.apply(null,r)},forEach:function(e,t,r){var n=this;r=r||n,"string"==typeof t&&(t=n[t]),a(e,t,r)},functions:function(e){return u(e||this)}});t.exports=l},{"../WBDeferred":4,"../WBMixin":6,"../lib/defer":15,"../lib/delay":16,"../lib/forEach":19,"../lib/functions":21,"../lib/toArray":27,"../lib/when":28}],37:[function(e,t){"use strict";t.exports={ControllerMixin:e("./ControllerMixin"),ObservableHashMixin:e("./ObservableHashMixin"),WBBindableMixin:e("./WBBindableMixin"),WBDestroyableMixin:e("./WBDestroyableMixin"),WBEventsMixin:e("./WBEventsMixin"),WBStateMixin:e("./WBStateMixin"),WBUtilsMixin:e("./WBUtilsMixin")}},{"./ControllerMixin":30,"./ObservableHashMixin":31,"./WBBindableMixin":32,"./WBDestroyableMixin":33,"./WBEventsMixin":34,"./WBStateMixin":35,"./WBUtilsMixin":36}],38:[function(e,t){"use strict";var r=e("wunderbits.core"),n=r.WBEventEmitter,i=r.lib.clone,o=r.lib.assert,a=e("./lib/generateId"),s="id",c=n.extend({initialize:function(e){var t=this;o.object(e),o(e.database),t.database=e.database},generateId:function(e,t,r){if(!t){if(t=a(),r.collection)for(;r.collection.get(t);)t=a();r.set(e,t)}return t},queryCollection:function(e){var t=this,r=t.database.crud,n=e.storeName||e.model.prototype.storeName;return r.query(n)},operateOnModel:function(e,t){var r,n=this,o=n.database.crud;return r="function"==typeof e.toJSON?e.toJSON():i(e.attributes),r.id||(r.id=e.id),o[t](e.storeName,r)},sync:function(e,t,r){var n=this;r=r||{};var i=n.database.stores,o=t.collection,a=t.storeName||o&&o.storeName,c=i[a],u=c&&c.keyPath||s,l=t.attributes,f=l.id||l[u],d=/(create|update)/.test(e);if(d&&(f=n.generateId(u,f,t)),!a||"none"===a)return void("function"==typeof r.success&&r.success());if(a in i){var p=r.success;r.success=function(){"function"==typeof p&&p.apply(this,arguments),/(create|update|destroy)/.test(e)&&n.database.trigger(e,a,f),"fullTextIndexFields"in c&&n.trigger("index",e,a,t)};var v;v="read"===e&&!t.id&&t.model?n.queryCollection(t):n.operateOnModel(t,e),r.success&&v.done(r.success),r.error&&v.fail(r.error)}}});t.exports=c},{"./lib/generateId":49,"wunderbits.core":10}],39:[function(e,t){"use strict";var r=e("wunderbits.core"),n=r.WBEventEmitter,i=r.WBDeferred,o=r.lib.when,a=r.lib.assert,s={init:"ERR_ABSTRACT_BACKEND_INITIALIZED"},c=n.extend({defaultKeyPath:"id",initialize:function(){var e=this;a(e.constructor!==c,s.init),e.ready=new i},connect:function(e){var t=this;return t.options=t.options||{},t.options.db=e,t.stores=e.stores,t.openDB(e.name,e.version),t.ready.promise()},openSuccess:function(){var e=this;e.trigger("connected"),e.ready.resolve()},openFailure:function(e,t){var r=this;r.trigger("error",e,t),r.ready.reject(e,t)},mapStores:function(e){for(var t,r,n,i=this,o=[],a=i.stores,s=Object.keys(a);s.length;)r=s.shift(),n=a[r],t=e.call(i,r,n),o.push(t);return o},truncate:function(e){var t=this,r=new i;t.ready=new i;var n=t.mapStores(t.clearStore);return o(n).then(function(){t.ready.reject(),r.resolve(),"function"==typeof e&&e(),t.trigger("truncated")}),r.promise()}});t.exports=c},{"wunderbits.core":10}],40:[function(e,t){(function(r){"use strict";var n=e("wunderbits.core"),i=n.WBDeferred,o=e("./AbstractBackend"),a=r.DOMError||r.DOMException,s=r.indexedDB||r.webkitIndexedDB||r.mozIndexedDB||r.msIndexedDB,c={READ:"readonly",WRITE:"readwrite"},u={privateMode:"ERR_IDB_FIREFOX_PRIVATE_MODE",downgrade:"ERR_IDB_CANT_DOWNGRADE_VERSION",unknown:"ERR_IDB_UNKNOWN",upgradeBrowser:"ERR_IDB_UPGRADE_BROWSER",storeCreationFailed:"ERR_IDB_STORE_CREATION_FAILED",storeClearFailed:"ERR_IDB_STORE_CLEAR_FAILED",notFound:"ERR_IDB_OBJECT_NOT_FOUND",getFailed:"ERR_IDB_STORE_GET_FAILED",cursorFailed:"ERR_IDB_CANT_OPEN_CURSOR",queryFailed:"ERR_IDB_QUERY_FAILED",updateFailed:"ERR_IDB_STORE_UPDATE_FAILED",destroyFailed:"ERR_IDB_STORE_DESTROY_FAILED"},l=o.extend({transactionQueue:{},isFlushingTransactionQueue:{},flushNextTransaction:function(e,t){var r,n=this,i=n.transactionQueue[e];i.length&&(n.isFlushingTransactionQueue[e]=!0,r=i.shift(),r(t).always(function(t,r){i.length?n.flushNextTransaction(e,r):n.isFlushingTransactionQueue[e]=!1}))},flushTransactionQueue:function(e){var t=this,r=t.transactionQueue[e],n=r.length,i=t.isFlushingTransactionQueue[e];n&&!i?t.flushNextTransaction(e):n||(t.isFlushingTransactionQueue[e]=!1)},queueTransactionOperation:function(e,t){var r=this,n=r.transactionQueue[e];n||(n=r.transactionQueue[e]=[]),n.push(t),!r.isFlushingTransactionQueue[e]&&r.flushTransactionQueue(e)},openDB:function(e,t){var r=this,n=s.open(e,t);n.onerror=r.onRequestError.bind(r),n.onsuccess=r.onRequestSuccess.bind(r),n.onupgradeneeded=r.onUpgradeNeeded.bind(r)},onRequestError:function(e){var t=this,r=e.target.error,n=r.name,i=r instanceof a;"InvalidStateError"===n&&i?t.openFailure(u.privateMode):"VersionError"===n&&i?t.openFailure(u.downgrade):t.openFailure(u.unknown,r)},onRequestSuccess:function(e){var t=this;if(t.db)return void t.openSuccess();var r=e.target.result;return"string"==typeof r.version?void t.openFailure(u.upgradeBrowser):(t.db=r,t.storeNames=r.objectStoreNames,void t.openSuccess())},onUpgradeNeeded:function(e){var t=this,r=e.target.result;t.db=r,t.storeNames=r.objectStoreNames,t.trigger("upgrading"),t.mapStores(t.createStore)},createStore:function(e,t){var r=this,n=r.db;if(!r.storeNames.contains(e)){var i=n.createObjectStore(e,{keyPath:t.keyPath||r.defaultKeyPath});i.onerror=function(t){r.trigger("error",u.storeCreationFailed,t,e)}}},clearStore:function(e){var t=this,r=new i,n=t.db.transaction([e],c.WRITE),o=n.objectStore(e),a=o.clear();return a.onsuccess=function(){r.resolve()},a.onerror=function(n){t.trigger("error",u.storeClearFailed,n,e),r.reject()},r.promise()},read:function(e,t){var r=this,n=new i,o=r.db.transaction([e],c.READ),a=o.objectStore(e),s=t[a.keyPath||r.defaultKeyPath]||t.id,l=a.get(s);return l.onsuccess=function(t){var i=t.target.result;i?n.resolve(i):(r.trigger("error",u.notFound,null,e,i),n.reject())},l.onerror=function(i){r.trigger("error",u.getFailed,i,e,t),n.reject()},n.promise()},query:function(e){var t=this,r=new i,n=t.db.transaction([e],c.READ),o=n.objectStore(e),a=[],s=o.openCursor();return s?(s.onerror=function(n){t.trigger("error",u.queryFailed,n,e),r.reject()},s.onsuccess=function(e){var t=e.target.result;t?(a.push(t.value),t["continue"]()):r.resolve(a)}):(t.trigger("error",u.cursorFailed,null,e),r.reject()),r.promise()},getWriteTransaction:function(e){var t=this;return t.db.transaction([e],c.WRITE)},update:function(e,t){var r=this,n=new i,o=n.promise();return r.queueTransactionOperation(e,function(i){var a=i?i:r.getWriteTransaction(e),s=a.objectStore(e),c=s.put(t);return c.onsuccess=function(){n.resolve(void 0,a)},c.onerror=function(i){r.trigger("error",u.updateFailed,i,e,t),n.reject()},o}),o},destroy:function(e,t){var r=this,n=new i,o=n.promise();return r.queueTransactionOperation(e,function(i){var a=i?i:r.getWriteTransaction(e),s=a.objectStore(e),c=t[s.keyPath||r.defaultKeyPath]||t.id,l=s["delete"](c);return l.onsuccess=function(){n.resolve(void 0,a)},l.onerror=function(i){r.trigger("error",u.destroyFailed,i,e,t),n.reject()},o}),o},nuke:function(){var e=this,t=e.options.db.name,r=new i,n=s.deleteDatabase(t);return n.onsuccess=function(){r.resolve()},n.onerror=function(){r.reject()},r.promise()}});t.exports=l}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./AbstractBackend":39,"wunderbits.core":10}],41:[function(e,t){(function(r){"use strict";var n=e("wunderbits.core"),i=n.WBDeferred,o=n.lib.forEach,a=n.lib.toArray,s=e("./AbstractBackend"),c=e("../lib/SafeParse"),u=r.indexedDB||r.webkitIndexedDB||r.mozIndexedDB||r.msIndexedDB,l=s.extend({cache:{},localStorageAvailable:!0,initialize:function(){var e=this;e.ready=new i},connect:function(e){var t=this;if(t.stores=e.stores,t.localStorageAvailable=e.localStorageAvailable,t.localStorageAvailable){var n=r.localStorage;if("memory"===n.getItem("availableBackend")&&n.getItem("dbVersion")!==""+e.version)if(n.clear(),u){var i=u.deleteDatabase(e.name);i.onsuccess=i.onerror=function(){r.location.reload()}}else r.location.reload()}return!t.cache&&t.reset(),t.ready.resolve(),t.ready.promise()},reset:function(){var e=this;e.cache={},o(e.stores,function(t,r){e.cache[r]={}})},truncate:function(e){var t=this,n=new i;return t.ready=new i,t.reset(),t.localStorageAvailable&&r.localStorage.clear(),setTimeout(function(){t.ready.reject(),n.resolve(),"function"==typeof e&&e(),t.trigger("truncated")},50),n.promise()},read:function(e,t){var n,o=this,a=new i,s=o.stores[e];if(o.localStorageAvailable&&s.critical){var u=t[s.keyPath]||t.id;n=r.localStorage[e+"_"+u],n&&(n=c.json(n))}else n=o.cache[e][t.id];return setTimeout(function(){void 0!==n?a.resolve(n):a.reject()},50),a.promise()},query:function(e){var t=this,r=new i,n=a(t.cache[e]);return r.resolve(n).promise()},update:function(e,t){var n=this,o=new i,a=n.stores[e];if(n.localStorageAvailable&&a.critical){var s=t[a.keyPath]||t.id;r.localStorage[e+"_"+s]=JSON.stringify(t)}else n.cache[e][t.id]=t;return o.resolve().promise()},destroy:function(e,t){var r=this,n=new i;return delete r.cache[e][t.id],n.resolve().promise()}});t.exports=l}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/SafeParse":48,"./AbstractBackend":39,"wunderbits.core":10}],42:[function(e,t){(function(r){"use strict";var n=e("wunderbits.core"),i=n.WBDeferred,o=n.lib.when,a=e("./AbstractBackend"),s=e("../lib/printf"),c=e("../lib/FieldTypes"),u=e("../lib/SafeParse"),l=r.openDatabase,f=r.escape,d=r.unescape,p={createTable:"CREATE TABLE IF NOT EXISTS ? (? TEXT PRIMARY KEY, ?)",truncateTable:"DELETE FROM ?",dropTable:"DROP TABLE IF EXISTS ?",read:"SELECT * from ? WHERE ?='?' LIMIT 1",query:"SELECT * from ?",upsert:"INSERT OR REPLACE INTO ? (?) VALUES (?)",destroy:"DELETE FROM ? WHERE ?='?'"},v={"default":"TEXT"};v[c.Float]="REAL",v[c.Integer]="INTEGER";var h=a.extend({dbSize:5242880,openDB:function(e,t){var r=this,n=r.ready,i=setTimeout(function(){r.openFailure("ERR_WS_CONNECT_TIMEOUT")},2e3);n.done(function(){clearTimeout(i)});try{var o=l(e,"",e,r.dbSize);r.db=o,t=""+t,o.version!==t?r.onUpgradeNeeded().done(r.openSuccess,r).fail(r.openFailure,r):r.openSuccess()}catch(a){r.openFailure("ERR_WS_CONNECT_FAILED",a)}},execute:function(e){var t=this,r=new i;return t.db.transaction(function(t){t.executeSql(e,[],function(e,t){r.resolve(t)},function(e,t){r.reject(t)})}),r.promise()},parseGeneric:function(e){return u.json(d(e.json))},populateGeneric:function(e,t,r){e.push("json"),t.push("'"+f(JSON.stringify(r))+"'")},parseFields:function(e,t){var r,n,i,o,a={id:e.id};for(r in t)n=t[r],i=e[r],void 0!==e[r]&&(n===c.Integer?(o=parseInt(i,10),isNaN(i)&&console.warn("failed to parse %s as Integer",i),i=o||0):n===c.Float?(o=parseFloat(i,10),isNaN(i)&&console.warn("failed to parse %s as Float",i),i=o||0):(i=i&&d(i),n===c.Boolean?i="true"===i:n===c.Array?i=u.json(i)||[]:n===c.Object?i=u.json(i)||{}:""===i&&(i=null)),a[r]=i);return a},populateFields:function(e,t,r,n,i){var o,a,s;for(o in n)a=n[o],s=r[o],void 0!==s&&o!==i&&(s=a===c.Float||a===c.Integer?s&&!isNaN(s)?s:0:a===c.Array&&Array.isArray(s)?"'"+f(JSON.stringify(s))+"'":a===c.Object?"'"+f(JSON.stringify(s))+"'":null!==s?"'"+f(s)+"'":"NULL",e.push('"'+o+'"'),t.push(s))
},toArray:function(e,t){for(var r,n=this,i=e.length,o=new Array(i),a=n[t?"parseFields":"parseGeneric"],s=0;i>s;s++)r=e.item(s),o[s]=a.call(n,r,t);return o},onUpgradeNeeded:function(){var e=this;e.trigger("upgrading");var t=e.mapStores(e.createStore);return o(t).promise()},createStore:function(e,t){var r=this,n=new i,o=t.keyPath||r.defaultKeyPath,a=t.fields,c=p.createTable;if(a){"id"===o&&delete a.id;var u=Object.keys(a).map(function(e){return'"'+e+'" '+(v[a[e]]||v.default)});c=s(c,e,o,u.join(", "))}else c=s(c,e,o,"json TEXT");return r.execute(c).done(n.resolve,n).fail(function(t){r.trigger("error","ERR_WS_STORE_CREATION_FAILED",t,e),n.reject()}),n.promise()},clearStore:function(e){var t=this,r=new i,n=s(p.truncateTable,e);return t.execute(n).done(r.resolve,r).fail(function(n){t.trigger("error","ERR_WS_CLEAR_FAILED",n,e),r.reject()}),r.promise()},read:function(e,t){var r=this,n=new i,o=r.stores[e],a=o.fields,c=o.keyPath||r.defaultKeyPath,u=t[c]||t.id,l=s(p.read,e,c,u);return r.execute(l).done(function(i){if(0===i.rows.length)r.trigger("error","ERR_WS_OBJECT_NOT_FOUND",null,e,t),n.reject();else{var o=r.toArray(i.rows,a);n.resolve(o[0])}}).fail(function(i){r.trigger("error","ERR_WS_READ_FAILED",i,e,t),n.reject()}),n.promise()},query:function(e){var t=this,r=new i,n=t.stores[e],o=n&&n.fields,a=s(p.query,e);return t.execute(a).done(function(e){var n=t.toArray(e.rows,o);r.resolve(n)}).fail(function(n){t.trigger("error","ERR_WS_QUERY_FAILED",n,e),r.reject()}),r.promise()},update:function(e,t){var r=this,n=new i,o=r.stores[e],a=o.fields,c=o.keyPath||r.defaultKeyPath,u=t[c]||t.id,l=[c],f=["'"+u+"'"],d=r[a?"populateFields":"populateGeneric"];d.call(r,l,f,t,a,c);var v=s(p.upsert,e,l,f);try{r.execute(v).done(function(){n.resolve()}).fail(function(i){r.trigger("error","ERR_WS_UPDATE_FAILED",i,e,t),n.reject()})}catch(h){r.trigger("error","ERR_WS_UPDATE_FAILED",h,e,t),n.reject()}return n.promise()},destroy:function(e,t){var r=this,n=new i,o=r.stores[e],a=o.keyPath||r.defaultKeyPath,c=t[a]||t.id,u=s(p.destroy,e,a,c);return r.execute(u).done(function(){n.resolve()}).fail(function(i){r.trigger("error","ERR_WS_DESTROY_FAILED",i,e,t),n.reject()}),n.promise()},nuke:function(){var e=this;return console.warn("cant delete websql database"),e.truncate()}});t.exports=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/FieldTypes":47,"../lib/SafeParse":48,"../lib/printf":50,"./AbstractBackend":39,"wunderbits.core":10}],43:[function(e,t){(function(r){"use strict";var n=e("wunderbits.core"),i=n.WBEventEmitter,o=n.WBDeferred,a=n.lib.assert,s=n.lib.extend,c=n.lib.clone,u=e("./Backends/MemoryBackend"),l=e("./Backends/WebSQLBackend"),f=e("./Backends/IndexedDBBackend"),d=r.chrome,p=!!(d&&d.app&&d.app.runtime),v=!0,h={indexeddb:["indexedDB","webkitIndexedDB","mozIndexedDB","msIndexedDB"],websql:["openDatabase"]},g={memory:u,websql:l,indexeddb:f},b=i.extend({crud:{},initialize:function(e){var t=this;e=e||{},t.ready=new o,a.object(e.schema);var r=e.schema;t.stores=r.stores;var n=r.database;t.name=n.name;var i=1e7*Object.keys(t.stores).length;i+=parseInt(n.version,10)||1,t.version=i},init:function(e){var t=this,r=t.ready;if("resolved"===r.state())return r.promise();e=t.findAvailableBackend(e),t.backendName=e;var n=t.initLogger(e.toUpperCase()),i=t.stores;return t.initBackend(e,{name:t.name,version:t.version,stores:i,infoLog:n.info,errorLog:n.error,localStorageAvailable:v}),r.promise()},currentBackend:function(){var e=this;return e.backendName},initLogger:function(e){return{info:console.info.bind(console,"["+e+"]"),error:console.error.bind(console,"["+e+"]")}},initBackend:function(e,t){var r=this,n=g[e],i=r.backend=new n;r.options=t,i.on("error",function(){r.trigger.apply(r,arguments)}),i.connect(t).done(r.initSuccess,r).fail(r.initFailure,r)},initSuccess:function(){var e=this,t=e.backend,r={create:t.update,read:t.read,update:t.update,"delete":t.destroy,query:t.query};Object.keys(r).forEach(function(e){var n=r[e];r[e]=function(){var e=arguments,r=new o,i=t.ready;return i.done(function(){n.apply(t,e).done(r.resolve,r).fail(r.reject,r)}),i.fail(r.reject,r),r.promise()}}),s(e.crud,r),e.ready.resolve(),e.publish("ready",{stores:e.stores})},initFailure:function(){var e=this;e.ready.reject()},findAvailableBackend:function(e){if(e in h)return e;if(d&&d.storage)return"indexeddb";try{var t=r.localStorage.getItem("availableBackend");if(t in h)return t}catch(n){return v=!1,"memory"}var i;for(var o in h)for(var a=c(h[o]);a.length&&!i;)if(r[a.shift()]){i=o;break}return i||"memory"},getAll:function(e,t){var r=this;r.ready.done(function(){var n=r.backend.query(e);n.done(t)})},truncate:function(e){var t=this;t.ready.done(function(){"memory"===t.backendName||p||v&&r.localStorage.clear(),t.backend.truncate().then(e)})}});t.exports=b}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Backends/IndexedDBBackend":40,"./Backends/MemoryBackend":41,"./Backends/WebSQLBackend":42,"wunderbits.core":10}],44:[function(e,t){(function(r){"use strict";var n,i=r.chrome,o=i&&i.storage;n=e(o?"./localStorage/WBChromeLocalStorage":"./localStorage/WBBrowserLocalStorage"),t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./localStorage/WBBrowserLocalStorage":51,"./localStorage/WBChromeLocalStorage":52}],45:[function(e,t){"use strict";function r(e){var t=e.fields;delete e.fields;var n=i.extend.call(this,e);n.extend=r;var a,s,u;for(a in t)if(s=t[a],u=c[a],u&&Array.isArray(s)){for(;s.length;)t[s.shift()]=u;delete t[a]}return n.fields=o({},n.fields,t),n}var n=e("wunderbits.core"),i=n.WBSingleton,o=n.lib.extend,a=e("./lib/FieldTypes"),s=i.extend({FieldTypes:a,fields:{}}),c={};Object.keys(a).forEach(function(e){c[e.toLowerCase()+"s"]=a[e]}),s.extend=r,t.exports=s},{"./lib/FieldTypes":47,"wunderbits.core":10}],46:[function(e,t){"use strict";t.exports={BackboneDBSync:e("./BackboneDBSync"),WBDatabase:e("./WBDatabase"),WBLocalStorage:e("./WBLocalStorage"),WBSchema:e("./WBSchema")}},{"./BackboneDBSync":38,"./WBDatabase":43,"./WBLocalStorage":44,"./WBSchema":45}],47:[function(e,t){t.exports={Array:"ARRAY",Boolean:"BOOLEAN",DateTime:"DATETIME",Float:"FLOAT",Integer:"INTEGER",Object:"OBJECT",Text:"TEXT"}},{}],48:[function(e,t){"use strict";function r(e){try{return JSON.parse(e)}catch(t){console.warn('Unable to parse "'+e+'"')}}var n=e("wunderbits.core"),i=n.WBSingleton,o=i.extend({json:r});t.exports=o},{"wunderbits.core":10}],49:[function(e,t){"use strict";function r(){return(16*Math.random()|0).toString(16)}function n(){return"lw"+new Array(31).join("x").replace(/x/g,r)}t.exports=n},{}],50:[function(e,t){"use strict";function r(e){var t=1,r=arguments;return e.replace(/\?/g,function(){var e=r[t++];return void 0===e?"":Array.isArray(e)?e.join(", "):e})}t.exports=r},{}],51:[function(e,t){(function(r){"use strict";var n,i=e("wunderbits.core"),o=i.WBClass,a=i.WBDeferred;try{n=r.localStorage}catch(s){console.warn(s)}var c=o.extend({getItem:function(e){var t=new a,r=n.getItem(e);return t.resolve(r).promise()},setItem:function(e,t){var r=new a;try{n.setItem(e,t),r.resolve()}catch(i){r.reject(i)}return r.promise()},removeItem:function(e){var t=new a;return n.getItem(e),t.resolve().promise()},clear:function(){var e=new a;return n.clear(),e.resolve().promise()}});t.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"wunderbits.core":10}],52:[function(e,t){(function(r){"use strict";var n=e("wunderbits.core"),i=n.WBClass,o=n.WBDeferred,a=r.chrome,s=a&&a.storage&&a.storage.local,c=i.extend({getItem:function(e){var t=new o;return s.get(e,function(r){if(a.runtime.lastError)t.reject(a.runtime.lastError);else{var n=r[e];t.resolve(n)}}),t.promise()},setItem:function(e,t){var r=new o,n={};return n[e]=t,s.set(n,function(){a.runtime.lastError?r.reject(a.runtime.lastError):r.resolve()}),r.promise()},removeItem:function(e){var t=new o;return s.remove(e,function(){a.runtime.lastError?t.reject(a.runtime.lastError):t.resolve()}),t.promis()},clear:function(){var e=new o;return s.clear(function(){a.runtime.lastError?e.reject(a.runtime.lastError):e.resolve()}),e.promise()}});t.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"wunderbits.core":10}]},{},[46])(46)});